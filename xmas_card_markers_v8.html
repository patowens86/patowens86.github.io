
<html>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/cfe5f316/dist/aframe-extras.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="/scripts/components_v8.js"></script>
    <script src="/scripts/play-on-scan.js"></script>
    <script src="/scripts/cursor.js" defer></script>
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
    <script src= 
"https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>
<script type="text/javascript" src="/scripts/webcamjs/webcam.min.js"></script>
<!--    <style>
	  .arjs-loader {
	    height: 100%;
	    width: 100%;
	    position: absolute;
	    top: 0;
	    left: 0;
	    background-color: rgba(0, 0, 0, 0.8);
	    z-index: 9999;
	    display: flex;
	    justify-content: center;
	    align-items: center;
	  }

	  .arjs-loader div {
	    text-align: center;
	    font-size: 1.25em;
	    color: white;
	  }
	</style> -->

	<head><link rel="stylesheet" href="index.css"></head>
<style>
#my_camera{
 width: 320px;
 height: 240px;
 border: 1px solid black;
}
</style>
    <body style="margin : 0px; overflow: hidden;">
	<!-- <div class="arjs-loader">
    	<div>Loading, please wait...</div>
  	</div> -->
  <div id="screenshot">
  <div id="tapInstructions">
    <img src="assets/ic_tap1x.svg" id="tapIcon">
    <p id="instructionText">Tap a <b>gift box</b> to activate a scene.</p>
  </div>

	<div id="audioIconContainer" style=" z-index: 10">
	 <div id="audioIcon" class="audioOff"></div>
	</div>

	<div id="photoModeContainer">
	  <div id="photoModeBG"></div>
	  <img id="photoModeImage">
	  <div id="flash"></div>
	  <div id="shutterButton" onclick="take_snapshot()"></div>
	  <div id="closeButton"></div>
	  <div id="photoPrompts">
	      <p id="shareBlurb">Don't forget to share your holiday cheer with <span class="bold">@sixtytwo.co!</span></p>
	      <p id="shareBlurbAlt">Tap and hold to save the picture!</p>
	      <div id="shareButton">
	        <p id="shareButtonText">Share</p>
	      </div>
	      <div id="replayButton">
	        <p>Replay</p>
	      </div>
	  </div>
<div>
       <div id="Camera" class="Camera"> </div>
    <br>
    <input type="button" id="takeshot" value="Capture" onClick="take_snapshot()" />
 </div>
    <div id="results"></div>
	</div>
<script language="JavaScript">
 Webcam.set({
  width: 320,
  height: 240,
  image_format: 'jpeg',
  jpeg_quality: 90
 });
 Webcam.attach( '#camera' );

<!-- Code to handle taking the snapshot and displaying it locally -->
function take_snapshot() {
 
 // take snapshot and get image data
 Webcam.snap( function(data_uri) {
  // display results in page
  document.getElementById('results').innerHTML = 
  '<img src="'+data_uri+'"/>';
  } );
}
</script>

  <a-scene
      vr-mode-ui='enabled: false;'
      toggle-audio
      photo-mode
      renderer="logarithmicDepthBuffer: true;"
      embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'
      xrweb
      xrextras-almost-there>
<!--
          <a-assets>
            <video id="trello" autoplay="true" loop="true" src="/videos/Trello.mp4"></video>
            <audio id="jingle_bells" autoplay="true" loop="false" src="/audio/JingleBells_s.mp3"></sound>
            <audio id="oh_xmas" autoplay="true" loop="false" src="/audio/OhXmas_s.mp3"></sound>
            <audio id="we_wish_you" autoplay="true" loop="false" src="/audio/WeWishYou_s.mp3"></sound>
            <a-asset-item id="s1" src="/models/CesiumMan.gltf"></a-asset-item>
            <a-asset-item id="s3" src="/models/elf.glb"></a-asset-item>
            <a-asset-item id="s4" src="/models/rudolph.glb"></a-asset-item>
            <a-asset-item id="s6" src="/models/Santa.glb"></a-asset-item>
            <a-asset-item id="s11" src="/models/XmasTree.glb"></a-asset-item>
            <a-asset-item id="gift1" src="/models/Gift_Square.glb"></a-asset-item>
            <a-asset-item id="gift3" src="/models/Gift_Square_polkadot.glb"></a-asset-item>
            <a-asset-item id="gift4" src="/models/Gift_Tall.glb"></a-asset-item>
            <a-asset-item id="gift6" src="/models/Gift_wide.glb"></a-asset-item>
            <a-asset-item id="gift11" src="/models/Gift_wide_green.glb"></a-asset-item>
          </a-assets> 
      -->

          <a-sound id="song" class="audio" src="/audio/JingleBells_s.mp3" autoplay="true" volume="0"></a-sound>
          <a-sound id="audio_1" class="audio" src="/audio/WeWishYou_s.mp3" autoplay="false" volume="0"></a-sound>

          <a-marker preset="custom" type="pattern" url="/markers/1.patt">
              <!-- <a-box position="0 .5 0" start-animation='name: scene1;'>
              </a-box> -->

			  <a-box class="gift" position='0 0.5 0' scale="1.5 1.5 1.5" material='opacity: 0.5;' color='blue' start-animation='name: scene1; sound_id: audio_1'>
				<a-entity
              	id='box1'
              	scale="0.666 0.666 0.666"
              	position='0 -0.5 0'
                gltf-model='/models/Gift_Square.glb' 
              	></a-entity>
			  </a-box>
   
              <a-entity class="scene" id='scene1'
                gltf-model='/models/CesiumMan.gltf'
                animation-mixer
                visible="false">

              </a-entity>
          </a-marker>
          <a-marker preset="custom" type="pattern" url="/markers/3.patt">
			  <a-box class="gift" position='0 0.5 0' scale="2 2 2" material='opacity: 0.5;' start-animation='name: scene3;'>
	              <a-entity 
	                gltf-model='/models/Gift_Square_polkadot.glb'
              		scale="0.5 0.5 0.5"
              		position='0 -0.5 0'
	              ></a-entity>
			  </a-box>

              <a-entity class="scene" id="scene3" visible="false">
                <a-entity
                  gltf-model='/models/elf.glb'animation-mixer>
                </a-entity>
                <a-entity position= "0 1 -1" scale="1.5 1 1">
                  <a-video play-on-scan src="/videos/Trello.mp4"></a-video> 
                </a-entity>
              </a-entity>
          </a-marker>
          <a-marker preset="custom" type="pattern" url="/markers/4.patt">
			<a-box class="gift" position='0 0.5 0' scale="2 2 2" material='opacity: 0.5;' start-animation='name: scene4;'>
              <a-entity 
                gltf-model='/models/Gift_Tall.glb'
              	scale="0.5 0.5 0.5"
              	position='0 -0.5 0'
              >
              </a-entity>
          	</a-box>
              <a-entity class="scene" id='scene4'
                gltf-model='/models/rudolph.glb'
                animation-mixer
                visible="false"
              >
              </a-entity>
          </a-marker>
          <a-marker preset="custom" type="pattern" url="/markers/6.patt">
              <a-box class="gift" position='0 0.5 0' scale="2 2 2" material='opacity: 0.5;' start-animation='name: scene6;'>
	              <a-entity
	                gltf-model='/models/Gift_wide.glb'
	              	scale="0.5 0.5 0.5"
	              	position='0 -0.5 0'
	              >
	              </a-entity>
          	  </a-box>
              <a-entity class="scene" id='scene6'
                gltf-model='/models/Santa.glb'
                animation-mixer
                visible="false"
              >
              </a-entity>
          </a-marker>
          <a-marker preset="custom" type="pattern" url="/markers/11.patt">
			  <a-box class="gift" position='0 0.5 0' scale="1.5 1.5 1.5" material='opacity: 0.5;' start-animation='name: scene11;'>
	              <a-entity
	                gltf-model='/models/Gift_wide_green.glb'
	              	scale="0.666 0.666 0.666"
	              	position='0 -0.5 0'
	              >
	              </a-entity>
          	  </a-box>
              <a-entity class="scene" id='scene11'
                gltf-model='/models/XmasTree.glb'
                animation-mixer
                visible="false"
              >
              </a-entity>
          </a-marker>
          <a-entity
              camera cursor="rayOrigin: mouse; fuse: false" raycaster="objects: a-box">
          </a-entity>
        </a-scene>
      </div>
      <div id="output"></div>
    </body>
</html>